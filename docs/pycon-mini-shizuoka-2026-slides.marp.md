---
marp: true
theme: default
paginate: true
size: 16:9
header: "PyCon mini Shizuoka 2026"
footer: "AI主導でFastAPIのWebサービスを作るとき、人間が構造化すべき境界線"
---

# AI主導でFastAPIのWebサービスを作るとき
# 人間が構造化すべき境界線

- PyCon mini Shizuoka 2026
- オカザキ
- 会場: コクリ

---

## 1. 今日の話

- 技術の使い方の話ではない
- AI時代に、どう判断してシステムを作るかの話

---

## 1-2. 自己紹介

- 名前: XXXX
- 職業: Web系エンジニア / PM / SIer
- 個人開発: インディーズゲーム、iPhoneアプリ、Webシステム
- 使用AI: Kiro / Codex / GitHub Copilot ほか

---

## 1-3. 話すこと / 話さないこと

**話すこと**
- AI主導開発で、人間が先に決めるべきこと
- 個人開発でAIを使って良かった点・つまずいた点

**話さないこと**
- 各技術の詳細な使い方
- プロンプトの細かい書き方

---

## 2. オープニング

- 個人開発で「途中まで作って止まる」を何度も経験
- 作りたいものはある
- 手を動かす
- 少し動く
- 触らなくなる

---

## 2-2. よく言われる理由

- 実現方法が分からない
- エラーが直せない
- 時間がない
- モチベーションが続かない

結論: どれも要因だが、決定打ではない

---

## 2-3. 本当の原因（仮説）

- 開発が止まる瞬間は「判断できなくなったとき」
- 何が正しいか分からない
- これでいいのか決められない

問題は気合ではなく、判断可能性の設計

---

## 3. AIで変わったこと

- 実装速度
- エラー解決の初速
- 壁打ち相手の不在

実装で止まることは減った

---

## 3-2. それでも残る問題

- どこまで作るか
- 何を捨てるか
- 何を正とするか

AI時代でも「判断の設計」は人間の仕事

---

## 4. NecoKeeper紹介

- 保護猫団体向けのAI活用Webアプリ
- 紙運用（世話記録・医療メモ）をデジタル化
- 保護から譲渡までを一元管理

参照: https://devpost.com/software/necokeeper

---

## 4-2. 現場課題とPOC状況

- 実際の保護猫カフェでPOC運用中
- 課題: 紙記録 → 後でExcel転記（重複入力・検索性低下）

ペルソナ
- ボランティア: 短期記録をスマホで素早く入力
- 管理者: 中長期記録の検索・提出資料作成
- 自治体: 年単位の記録確認

<!-- 図: ボランティア / 管理者 / 自治体 の情報フロー -->

---

## 4-3. 規模感（実測）

- 画面: 31
- DBテーブル: 15
- コード行数
  - Backend Python: 17,118
  - HTML: 7,779
  - JavaScript: 10,848

主要技術
- FastAPI / SQLAlchemy / Alembic / Pydantic
- Jinja2 / Vanilla JavaScript / SQLite
- Ruff / mypy / pytest / MCP / WeasyPrint

---

## 4-4. 代表機能（5つ）

- 保護猫マスタ管理
- 世話記録入力/可視化（公開フォーム + 管理画面）
- 医療記録/処置管理
- 里親応募/譲渡管理
- 帳票出力 + Automation API連携

規模の大小に関係なく、開発は「判断の連続」

---

## 5. 開発前提

- ハッカソン制約（短期・完成優先・失敗許容）
- 自分はコードを書かず、設計意図と制約を渡す

---

## 5-2. Spec と Vibe coding の使い分け

- Spec（前提ドキュメント）
  - 目的 / 制約 / 非目標 / 成功条件 / 受け入れ条件を固定
- Vibe coding
  - 対話で高速に試作・修正

対立ではなく役割分担

---

## 5-3. Kiro / Kiroween 背景

- Kiro: Agentic AI開発を支援するIDE/CLI
- Kiroween: Kiro活用を条件とする公式ハッカソン
- NecoKeeperは提出作品（Devpost公開）

参照
- https://kiro.dev/
- https://kiroween.devpost.com/

---

## 6. AI主導開発で壊れやすい場所

「壊れる」= 停止だけではない
- 画面ごとに挙動が違う
- 同じデータの意味が場所ごとにズレる
- 機能追加で副作用が出る

---

## 6-1. 3つのズレ

- 認証実装のズレ
  - ログイン判定の方法が揃っていない
- データ定義のズレ
  - 何を正として保存するかが曖昧
- 実装場所のズレ
  - どこでルールを担保するかが分散

壊れるのはコード単体より、前提のズレ

---

## 6-2. 機械で直せる問題

- フォーマット/静的解析: Ruff
- 型不整合: mypy
- 回帰不具合: pytest
- 入力整合: Pydantic

検知ルールが明確な問題は、AI + 自動化で回せる

---

## 6-3. 本当に難しい問題

- データモデル初期設計（後戻りコストが高い）
- ビジネス意図と実装挙動の整合
- 「何を正とするか」の定義

今回は最終的に、人間E2Eで受け入れを判断

---

## 6-4. 不一致が出たときの進め方

- 自動E2E: 既知シナリオの回帰検知
- 人間E2E: 違和感・導線・画面崩れ・DB反映を確認

運用
- AIで修正 → 人間が操作確認 → 必要に応じてDB確認
- 問題があれば再修正し、判断ログへ反映

---

## 7. 失敗事例（認証 Before / After）

**Before**
- 認証仕様を先に固定せず、画面単位で実装
- サーバー側認証確認が抜ける経路があった
- フロント側のトークン存在確認に依存

**After**
- 認証仕様（方式/保護対象/未認証時挙動）を先に文書化
- トークン検証を共通認証処理に集約
- 未認証時の遷移・レスポンス方針を統一

学び: 認証は「実装で合わせる」ではなく「仕様を先に固定」

---

## 8. ズレ防止チェックリスト

- 認証実装のズレ
- データ定義のズレ
- 実装場所のズレ

<!-- 図: 3項目のチェックフレーム -->

---

## 8-1. 認証実装のズレ（ログイン判定）

- 認証方式の使い分けを固定したか
- トークン取得/検証ロジックを共通化したか
- 未認証時挙動を統一したか

---

## 8-2. データ定義のズレ 例1（年齢表現）

- 初期案（AI提案）: 子猫 / 成猫 / 老猫
- 現場ヒアリング: 外見で年齢判定は難しく運用上も粗い
- 判断: 月齢中心の入力へ変更（必要時は推定フラグ）

学び: わかりやすさより、現場で意味があるか

---

## 8-3. データ定義のズレ 例2（ペットフード記録）

- 初期案: メーカー/商品をマスター管理して記録
- 検討: 日々入力の負荷が高い、目的（在庫管理等）が曖昧
- 判断: 初期リリースでは見送り、将来拡張へ

学び: 機能追加より運用コンセプトを優先

---

## 8-4. 実装場所のズレ（どこで判断するか）

- 状況: 既存記録編集で「排便なし」に変更時、便の状態が残って保存エラー
- 問題: 画面入力順に依存し、結果が変わる
- 判断: ルールはサーバー側で統一し、矛盾値を自動クリア

学び: 業務ルールはバックエンドで一貫担保する

---

## 9. 明日から使える実践フォーマット

- 前提ドキュメント（Spec相当）
  - 目的 / 制約 / 非目標 / 成功条件 / 受け入れ条件
- 判断ログ
  - 論点 / 選択肢 / 採用理由 / 見直し条件
- ズレ防止ルール
  - 認証実装 / データ定義 / 実装場所

---

## 9-2. AIへの運用ルール

人間が先に決める
- 何を自動チェックで担保するか
- どこを人間が確認するか（E2E観点）

AIが担当
- 前提と判断ログを参照して実装
- 自動チェックを反復

人間が担当
- 採否判断
- 最終成果物の責任

---

## 9-3. 短期AI開発で先に固定する3点

- 受け入れ条件
- ズレ防止ルール
- 最終責任は人間

速く作る前に、判断の土台を固定する

---

## 10. まとめ

- AIで実装は速くなる
- でも、判断は残る
- ズレを防ぐ判断は人間が引き取る
- 最終的な成果物の責任は人間が持つ

AIはときに「間違えるのは人間」と言う。
だからこそ、判断軸を先に設計して運用する。

---

## 10-2. クロージング

- これは正解の提示ではなく、2025年12月からの試行錯誤の記録
- AI駆動開発は変化が速い
- 現時点で有効だった進め方の一例として共有

ご清聴ありがとうございました。

---

## 11. 宣伝

- Kiroweenに出たことで、海外ハッカソンに出ることが怖くなくなった
- AWS主催の「10000 AIdeas Competition」でセミファイナルに選出
- 3月にAWS Buildersで記事公開予定

---

## 参考リンク（投影のみ）

- https://shizuoka.pycon.jp/2026/info
- https://kiroween.devpost.com/
- https://devpost.com/software/necokeeper
- https://kiro.dev/
- https://pycon-shizu.connpass.com/event/337283/presentation/
- https://pycon-shizu.connpass.com/event/228219/presentation/
- https://pycon-shizu.connpass.com/event/152678/presentation/
- https://speakerdeck.com/okajun35/pythondedesukutotupuapuriwojian-dan-nizuo-rufang-fa
