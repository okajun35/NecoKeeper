<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>世話記録用紙 - {{ animal.name or '名前未設定' }} ({{ year }}年{{ month }}月)</title>
    <style>
        @page {
            size: A4 portrait;
            margin: 15mm;
        }

        body {
            font-family: {{ font_family }}, 'Noto Sans CJK JP', 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', 'Yu Gothic', 'Meiryo', sans-serif;
            margin: 0;
            padding: 0;
            font-size: 9pt;
        }

        .header {
            text-align: center;
            margin-bottom: 10mm;
            border-bottom: 2px solid #333;
            padding-bottom: 5mm;
        }

        .title {
            font-size: 16pt;
            font-weight: bold;
            margin-bottom: 3mm;
        }

        .animal-info {
            font-size: 11pt;
            margin-bottom: 2mm;
        }

        .period {
            font-size: 10pt;
            color: #666;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 5mm;
        }

        th, td {
            border: 1px solid #333;
            padding: 2mm;
            text-align: center;
        }

        th {
            background-color: #f0f0f0;
            font-weight: bold;
            font-size: 8pt;
        }

        td {
            height: 8mm;
        }

        .date-col {
            width: 12%;
            font-weight: bold;
        }

        .time-col {
            width: 10%;
        }

        .appetite-col, .energy-col {
            width: 10%;
        }

        .urination-col, .cleaning-col {
            width: 8%;
        }

        .recorder-col {
            width: 15%;
        }

        .memo-col {
            width: 27%;
            text-align: left;
        }

        .footer {
            margin-top: 10mm;
            font-size: 8pt;
            color: #666;
            text-align: center;
        }

        .legend {
            margin-top: 5mm;
            font-size: 8pt;
            padding: 3mm;
            background-color: #f9f9f9;
            border: 1px solid #ddd;
        }

        .legend-title {
            font-weight: bold;
            margin-bottom: 2mm;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="title">世話記録用紙</div>
        <div class="animal-info">
            猫の名前: <strong>{{ animal.name or '名前未設定' }}</strong> (ID: {{ animal.id }})
        </div>
        <div class="period">{{ year }}年{{ month }}月</div>
    </div>

    <table>
        <thead>
            <tr>
                <th class="date-col">日付</th>
                <th class="time-col">時点</th>
                <th class="appetite-col">食欲<br>(1-5)</th>
                <th class="energy-col">元気<br>(1-5)</th>
                <th class="urination-col">排尿</th>
                <th class="cleaning-col">清掃</th>
                <th class="recorder-col">記録者</th>
                <th class="memo-col">メモ</th>
            </tr>
        </thead>
        <tbody>
            {% for date in dates %}
            {# 朝 #}
            <tr>
                <td class="date-col" rowspan="3">{{ date.day }}日<br>({{ ['月', '火', '水', '木', '金', '土', '日'][date.weekday()] }})</td>
                <td class="time-col">朝</td>
                <td class="appetite-col"></td>
                <td class="energy-col"></td>
                <td class="urination-col"></td>
                <td class="cleaning-col"></td>
                <td class="recorder-col"></td>
                <td class="memo-col"></td>
            </tr>
            {# 昼 #}
            <tr>
                <td class="time-col">昼</td>
                <td class="appetite-col"></td>
                <td class="energy-col"></td>
                <td class="urination-col"></td>
                <td class="cleaning-col"></td>
                <td class="recorder-col"></td>
                <td class="memo-col"></td>
            </tr>
            {# 夕 #}
            <tr>
                <td class="time-col">夕</td>
                <td class="appetite-col"></td>
                <td class="energy-col"></td>
                <td class="urination-col"></td>
                <td class="cleaning-col"></td>
                <td class="recorder-col"></td>
                <td class="memo-col"></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div class="legend">
        <div class="legend-title">記入方法</div>
        <ul style="margin: 0; padding-left: 15px;">
            <li><strong>食欲・元気:</strong> 1（とても悪い）～ 5（とても良い）の5段階で評価</li>
            <li><strong>排尿・清掃:</strong> ○（あり/済）、×（なし/未）で記入</li>
            <li><strong>記録者:</strong> 記録した人の名前を記入</li>
            <li><strong>メモ:</strong> 気になることがあれば記入</li>
        </ul>
    </div>

    <div class="footer">
        NecoKeeper - 保護猫管理システム
    </div>
</body>
</html>
